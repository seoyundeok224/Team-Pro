{"ast":null,"code":"var _jsxFileName = \"/Users/thesueji/Desktop/team2/Team-Pro/building-outline-map/src/components/Map/NaverMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NAVER_CLIENT_ID = process.env.REACT_APP_NAVER_ID;\nfunction NaverMap({\n  searchQuery\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markerRef = useRef(null);\n  const [isMapReady, setIsMapReady] = useState(false);\n\n  // 스크립트 로드 후 mapOptions를 안전하게 사용\n  const loadNaverScript = () => {\n    return new Promise((resolve, reject) => {\n      if (window.naver && window.naver.maps) {\n        resolve();\n        return;\n      }\n      const script = document.createElement('script');\n      script.src = `https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=${NAVER_CLIENT_ID}&submodules=geocoder`;\n      script.async = true;\n      script.defer = true;\n      script.onload = () => {\n        if (window.naver && window.naver.maps) {\n          resolve();\n        } else {\n          reject(new Error('네이버 지도 API 로딩 실패'));\n        }\n      };\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  };\n\n  // 최초 지도 로딩\n  useEffect(() => {\n    loadNaverScript().then(() => {\n      const mapOptions = {\n        center: new window.naver.maps.LatLng(37.5665, 126.978),\n        zoom: 14,\n        zoomControl: true,\n        mapTypeControl: true,\n        mapTypeId: window.naver.maps.MapTypeId.NORMAL,\n        scaleControl: true,\n        logoControl: true,\n        padding: {\n          top: 10,\n          right: 10,\n          bottom: 10,\n          left: 10\n        },\n        mapDataControl: false,\n        zoomControlOptions: {\n          position: window.naver.maps.Position.BOTTOM_LEFT,\n          style: 2\n        }\n      };\n      if (mapRef.current) {\n        mapInstance.current = new window.naver.maps.Map(mapRef.current, mapOptions);\n\n        // 현재 위치\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(pos => {\n            const currPos = new window.naver.maps.LatLng(pos.coords.latitude, pos.coords.longitude);\n            mapInstance.current.setCenter(currPos);\n            mapInstance.current.setZoom(13);\n            new window.naver.maps.Marker({\n              position: currPos,\n              map: mapInstance.current\n            });\n          });\n        }\n        setIsMapReady(true);\n      }\n    }).catch(err => {\n      console.error('지도 로드 실패:', err);\n    });\n  }, []);\n\n  // 주소 검색 시 지도 이동 + 콘솔 출력\n  useEffect(() => {\n    var _window$naver, _window$naver$maps;\n    if (!searchQuery || !isMapReady || !((_window$naver = window.naver) !== null && _window$naver !== void 0 && (_window$naver$maps = _window$naver.maps) !== null && _window$naver$maps !== void 0 && _window$naver$maps.Service)) return;\n    window.naver.maps.Service.geocode({\n      query: searchQuery\n    }, (status, response) => {\n      if (status !== window.naver.maps.Service.Status.OK) {\n        alert('주소 검색 실패');\n        return;\n      }\n      const result = response.v2.addresses[0];\n      if (!result) {\n        alert('검색 결과 없음');\n        return;\n      }\n      const lat = parseFloat(result.y);\n      const lng = parseFloat(result.x);\n      const location = new window.naver.maps.LatLng(lat, lng);\n      mapInstance.current.setCenter(location);\n      mapInstance.current.setZoom(14);\n\n      // 마커 초기화 및 다시 그리기\n      if (markerRef.current) {\n        markerRef.current.setMap(null);\n      }\n      markerRef.current = new window.naver.maps.Marker({\n        position: location,\n        map: mapInstance.current\n      });\n\n      // 콘솔 출력\n      console.log('🔎 도로명:', result.roadAddress);\n      console.log('지번:', result.jibunAddress);\n      console.log('위도:', lat, '경도:', lng);\n    });\n  }, [searchQuery, isMapReady]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    ref: mapRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 10\n  }, this);\n}\n_s(NaverMap, \"KhfBYMY9KojM6AT/Z9X3Awtckz8=\");\n_c = NaverMap;\nexport default NaverMap;\nvar _c;\n$RefreshReg$(_c, \"NaverMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","NAVER_CLIENT_ID","process","env","REACT_APP_NAVER_ID","NaverMap","searchQuery","_s","mapRef","mapInstance","markerRef","isMapReady","setIsMapReady","loadNaverScript","Promise","resolve","reject","window","naver","maps","script","document","createElement","src","async","defer","onload","Error","onerror","head","appendChild","then","mapOptions","center","LatLng","zoom","zoomControl","mapTypeControl","mapTypeId","MapTypeId","NORMAL","scaleControl","logoControl","padding","top","right","bottom","left","mapDataControl","zoomControlOptions","position","Position","BOTTOM_LEFT","style","current","Map","navigator","geolocation","getCurrentPosition","pos","currPos","coords","latitude","longitude","setCenter","setZoom","Marker","map","catch","err","console","error","_window$naver","_window$naver$maps","Service","geocode","query","status","response","Status","OK","alert","result","v2","addresses","lat","parseFloat","y","lng","x","location","setMap","log","roadAddress","jibunAddress","className","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/thesueji/Desktop/team2/Team-Pro/building-outline-map/src/components/Map/NaverMap.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nconst NAVER_CLIENT_ID = process.env.REACT_APP_NAVER_ID;\n\nfunction NaverMap({ searchQuery }) {\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markerRef = useRef(null);\n  const [isMapReady, setIsMapReady] = useState(false);\n\n  // 스크립트 로드 후 mapOptions를 안전하게 사용\n  const loadNaverScript = () => {\n    return new Promise((resolve, reject) => {\n      if (window.naver && window.naver.maps) {\n        resolve();\n        return;\n      }\n\n      const script = document.createElement('script');\n      script.src = `https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=${NAVER_CLIENT_ID}&submodules=geocoder`;\n      script.async = true;\n      script.defer = true;\n      script.onload = () => {\n        if (window.naver && window.naver.maps) {\n          resolve();\n        } else {\n          reject(new Error('네이버 지도 API 로딩 실패'));\n        }\n      };\n      script.onerror = reject;\n\n      document.head.appendChild(script);\n    });\n  };\n\n  // 최초 지도 로딩\n  useEffect(() => {\n    loadNaverScript().then(() => {\n      const mapOptions = {\n            center: new window.naver.maps.LatLng(37.5665, 126.978),\n            zoom: 14,\n            zoomControl: true,\n            mapTypeControl: true,\n            mapTypeId: window.naver.maps.MapTypeId.NORMAL,\n            scaleControl: true,\n            logoControl: true,\n            padding: { top: 10, right: 10, bottom: 10, left: 10 },\n            mapDataControl: false,\n            zoomControlOptions: {\n              position: window.naver.maps.Position.BOTTOM_LEFT,\n              style: 2,\n            },\n          };\n\n\n      if (mapRef.current) {\n        mapInstance.current = new window.naver.maps.Map(mapRef.current, mapOptions);\n\n        // 현재 위치\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition((pos) => {\n            const currPos = new window.naver.maps.LatLng(\n              pos.coords.latitude,\n              pos.coords.longitude\n            );\n            mapInstance.current.setCenter(currPos);\n            mapInstance.current.setZoom(13);\n            new window.naver.maps.Marker({\n              position: currPos,\n              map: mapInstance.current,\n            });\n          });\n        }\n\n        setIsMapReady(true);\n      }\n    }).catch((err) => {\n      console.error('지도 로드 실패:', err);\n    });\n  }, []);\n\n  // 주소 검색 시 지도 이동 + 콘솔 출력\n  useEffect(() => {\n    if (!searchQuery || !isMapReady || !window.naver?.maps?.Service) return;\n\n    window.naver.maps.Service.geocode(\n      { query: searchQuery },\n      (status, response) => {\n        if (status !== window.naver.maps.Service.Status.OK) {\n          alert('주소 검색 실패');\n          return;\n        }\n\n        const result = response.v2.addresses[0];\n        if (!result) {\n          alert('검색 결과 없음');\n          return;\n        }\n\n        const lat = parseFloat(result.y);\n        const lng = parseFloat(result.x);\n        const location = new window.naver.maps.LatLng(lat, lng);\n\n        mapInstance.current.setCenter(location);\n        mapInstance.current.setZoom(14);\n\n        // 마커 초기화 및 다시 그리기\n        if (markerRef.current) {\n          markerRef.current.setMap(null);\n        }\n        markerRef.current = new window.naver.maps.Marker({\n          position: location,\n          map: mapInstance.current,\n        });\n\n        // 콘솔 출력\n        console.log('🔎 도로명:', result.roadAddress);\n        console.log('지번:', result.jibunAddress);\n        console.log('위도:', lat, '경도:', lng);\n      }\n    );\n  }, [searchQuery, isMapReady]);\n\n  return <div className=\"map-container\" ref={mapRef} />;\n}\n\nexport default NaverMap;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}